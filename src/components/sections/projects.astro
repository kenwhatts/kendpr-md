---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import * as projects from "../../about/projects/projects.mdx";
import Section from "../../layout/section.astro";
import projectIcon from "../../about/skills/icons/headerIcon/project-icon.svg";

const getImage = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/projects/*.{jpeg,jpg}",
);
---

<Section icon={projectIcon} title="My Recent Projects:">
  {
    projects.frontmatter.list.map(
      (i: {
        link: string;
        img: string;
        description: string;
        title: string;
      }) => (
        <a
          href={i.link}
          class="xsm:p-8 xsm:rounded-2xl bg-primary-darker hover:bg-accent/30 rounded-lg p-4 no-underline!">
          <div class="xsm:rounded-[.5rem] relative mb-2 grid aspect-video place-items-center overflow-hidden rounded">
            {getImage[i.img] ? (
              <Image
                src={getImage[i.img]!()}
                alt={i.title}
                width={1920}
                height={1280}
                loading="lazy"
              />
            ) : null}
          </div>
          <h3>{i.title}</h3>
          <p class="text-sm">{i.description}</p>
        </a>
      ),
    )
  }
</Section>
